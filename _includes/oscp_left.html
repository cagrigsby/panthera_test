<section class="pan-layout-left">
  <div class="pan-layout-left__top">
    <!-- Existing top content here -->
  </div>

  <div class="pan-layout-left__middle">
    <ul class="pan-layout-left__menu">
      {% assign headers = page.content | split: '\n' %}
      {% assign header_levels = "" %}
      
      {% for line in headers %}
        {% if line contains '#' %}
          {% assign header = line | strip %}
          {% assign header_level = header | split: ' ' | first | size | minus: 1 %}
          {% assign header_text = header | remove: '#' | strip %}
          {% if header_levels contains header_level %}
            {% assign header_levels = header_levels | split: ',' | push: header_level | join: ',' %}
          {% else %}
            {% assign header_levels = header_levels | append: header_level | append: ',' %}
          {% endif %}
        {% endif %}
      {% endfor %}

      {% assign header_levels = header_levels | split: ',' | uniq %}

      {% for line in headers %}
        {% if line contains '#' %}
          {% assign header = line | strip %}
          {% assign header_level = header | split: ' ' | first | size | minus: 1 %}
          {% assign header_text = header | remove: '#' | strip %}
          {% if header_levels contains header_level %}
            <li class="header-level-{{ header_level }}">
              <a href="#{{ header_text | slugify }}">{{ header_text }}</a>
            </li>
          {% endif %}
        {% endif %}
      {% endfor %}
    </ul>
  </div>

  <div class="pan-layout-left__bottom">
    <!-- Existing bottom content here -->
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var headers = document.querySelectorAll('.pan-layout-left__menu a');
    headers.forEach(function(header) {
      header.addEventListener('click', function(e) {
        e.preventDefault();
        var targetId = header.getAttribute('href').substring(1);
        var targetElement = document.getElementById(targetId);
        if (targetElement) {
          targetElement.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });
  });
</script>
